<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>JBiclustGE API - JBiclustGE</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">JBiclustGE</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../configs/download/">Downloads</a>
</li>

                        
                            
<li >
    <a href="../../configs/install/">Setup</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorial <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../manualjbiclustgegui/">JBiclustGE-GUI</a>
</li>

                        
                            
<li >
    <a href="../manualjbiclustgecli/">JBiclustGE-CLI</a>
</li>

                        
                            
<li class="active">
    <a href="./">JBiclustGE API</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../studies/studiesjbiclustge/">Studies performed with JBiclustGE</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../manualjbiclustgecli/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../studies/studiesjbiclustge/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#jbiclustge-api">JBiclustGE API</a></li>
        
            <li class="second-level"><a href="#setup">Setup</a></li>
            
        
            <li class="second-level"><a href="#biclustering-algorithms">Biclustering Algorithms</a></li>
            
                <li class="third-level"><a href="#how-to-run-a-biclustering-method">How to run a biclustering method:</a></li>
            
                <li class="third-level"><a href="#how-to-run-the-biclustering-methods-in-multithread">How to run the biclustering methods in MultiThread</a></li>
            
        
            <li class="second-level"><a href="#executing-the-gene-set-enrichment-analysis-engines">Executing the Gene Set Enrichment analysis engines</a></li>
            
                <li class="third-level"><a href="#ontologizer">Ontologizer</a></li>
            
                <li class="third-level"><a href="#topgo">topGO</a></li>
            
        
            <li class="second-level"><a href="#post-processing-analysis">Post-processing Analysis</a></li>
            
                <li class="third-level"><a href="#coherence">Coherence</a></li>
            
                <li class="third-level"><a href="#coverage">Coverage</a></li>
            
                <li class="third-level"><a href="#overlap">Overlap</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="jbiclustge-api">JBiclustGE API</h1>
<p>This section presents some examples of how to use JBiclustGE API, for helping the developers to use/extend the functionalities incorporated in this API. </p>
<p>For a detailed information of the classes implemented in this API, see the <a href="../../files/apidocs/index.html">documentation</a>.</p>
<h2 id="setup">Setup</h2>
<p>JBiclustGE depends of several R packages to work properly, thus in the first time that JBiclustGE is executed needs to be always configured concerning to some operational aspects such as: R settings (mainly the folder to install the R packages), maximum allowed p-value, and other optional settings. There is an special class (JBiclustGESetupManager.class) that is responsible to configure, download the required algorithms/R packages,  and build the file (jbclustge.properties) that stores the settings of the application.</p>
<p>Important methods of class JBiclustGESetupManager:</p>
<ul>
<li>
<p>Check if JbiclustGE Environment its configured:</p>
<pre><code>  boolean isconfigured= JBiclustGESetupManager.isJbiclustGEConfigured();
</code></pre>
</li>
<li>
<p>Setup the required algorithms in JBiclustGE:</p>
<pre><code> JBiclustGESetupManager.setupJBiclustGEMethodsEnvironment(null)
 or 
 JBiclustGESetupManager.setupJBiclustGEMethodsEnvironment("/path_chosen_by_user");
</code></pre>
</li>
<li>
<p>Initializes the jbiclustge.properties file:</p>
<pre><code>JBiclustGESetupManager.setupJBiclustGEProperties("Path to R library");
</code></pre>
</li>
<li>
<p>Reset the previous configuration of JBiclustGE:</p>
<pre><code>JBiclustGESetupManager.resetPreviousConfiguration();
</code></pre>
</li>
</ul>
<h2 id="biclustering-algorithms">Biclustering Algorithms</h2>
<p>All the biclustering algorithms extends to a main abstract class (jbiclustge.methods.algorithms.AbstractBiclusteringAlgorithmCaller), that contains all the methods that are necessary to establish a biclustering method in this API. Figure below shows a generic UML scheme concerning to all the biclustering methods integrated in this API.</p>
<p><img alt="" src="../../files/images/jbiclustmethodsuml.png" /></p>
<h3 id="how-to-run-a-biclustering-method">How to run a biclustering method:</h3>
<p>BicatYeast.csv dataset for example presented bellow, <a href="../../files/datasets/BicatYeast.csv">download</a></p>
<pre><code>    public static void main(String[] args) throws FileNotFoundException, IOException, MissingValueImputationException, ParseException {


    URL dataUrl=HowToRunBiclusteringMethods.class.getResource("/BicatYeast.csv");

    // load expression dataset from file //
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();


    // Example how to run CPB algorithm  //
    CPBMethod cpb=new CPBMethod(expressiondataset);

    //  for instance change number cluster to seed//
    cpb.setNumberBiclustersToSeed(200);

    // run algorithm //
    cpb.run();

    // get results obtained by the algorithm //
    BiclusterList cpblistresults=cpb.getBiclusterResultList();

    //print the results//
    cpblistresults.printResults();


    ///////////////////////// Run Plaid example ////////////////////////////////////////
    // methods that were developed in R or belongs to R package starts with R letter //

    // initialize plaid method //
    RPlaidMethod plaid=new RPlaidMethod();

    // add expression dataset //
    plaid.setExpressionData(expressiondataset);

    // change the parameters that needed to be changed... //
    plaid.addClusterType(BCPlaidClusterType.COLUMNS);

    plaid.run();

    // Use this function after running a algorithm that uses R environment, this allows to shutdown the R session. //
    RConnector.closeSession();

    BiclusterList plaidresults=plaid.getBiclusterResultList();

    }
</code></pre>
<h3 id="how-to-run-the-biclustering-methods-in-multithread">How to run the biclustering methods in MultiThread</h3>
<pre><code>     public static void main(String[] args) throws Exception {


    URL dataUrl=HowToRunBiclusteringMethods.class.getResource("/BicatYeast.csv");
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();

    /*
     * Configure methods
     */

    /*
     * initialize list of task with methods that will be run in parallel
     */
    ArrayList&lt;BiclusteringTask&gt; methodstasklist=new ArrayList&lt;&gt;();

    /*
     *  add each task one by one
     */
    BibitMethod bibit=new BibitMethod(expressiondataset);
    methodstasklist.add(new BiclusteringTask(bibit));


    RFabiaMethod fabia=new RFabiaMethod(expressiondataset);
    methodstasklist.add(new BiclusteringTask(fabia));

    /*
     * Or use BiclusteringTasksFunctions to create a list of tasks
     */

    RIsaMethod isa=new RIsaMethod(expressiondataset);
    CPBMethod cpb=new CPBMethod(expressiondataset);
    QuBicMethod quibic=new QuBicMethod(expressiondataset);
    UnibicMethod unibic=new UnibicMethod(expressiondataset);


    methodstasklist.addAll(BiclusteringTasksFunctions.createListOfBiclusteringTasks(isa,cpb,quibic,unibic));

    /*
     * After creating the list of tasks, use the MultiThreadBiclusteringTaskExecutor to execute these tasks
     */

    // the output is the list of biclusters provided by the diferent biclustering algorithms, in the same order of the list of tasks.
    List&lt;BiclusterList&gt; results=MultiThreadBiclusteringTaskExecutor.run(4, methodstasklist);

    for (int i = 0; i &lt; results.size(); i++) {
        results.get(i).printResults();
    }

    /*
     * Close R session connection
     */
    RConnector.closeSession();

   }
</code></pre>
<h2 id="executing-the-gene-set-enrichment-analysis-engines">Executing the Gene Set Enrichment analysis engines</h2>
<p>ecoli_example.csv dataset for example presented bellow, <a href="../../files/datasets/ecoli_example.csv">download</a></p>
<h3 id="ontologizer">Ontologizer</h3>
<pre><code>    public static void main(String[] args) throws Exception {


    URL dataUrl=OntologizerExample.class.getResource("/ecoli_example.csv");

    // load expression dataset from file
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();

    RIsaMethod isa=new RIsaMethod(expressiondataset);
    isa.run();

    /*
     * initialize ontologizer analyser
     */
    OntologizerEnrichmentAnalyser analyser=new OntologizerEnrichmentAnalyser(isa.getBiclusterResultList(), StandardAnnotationFile.Escherichiacoli);

    /*
     * setup ontologizer parameters 
     */
    analyser.addCalculationMethod(OntologizerCalculationMethod.TermForTerm);
    analyser.addMultipleTestcorrectionMethod(OntologizerMTCMethod.Bonferroni);

    analyser.run();

    /*
     * get results processed by ontologizer
     */
    EnrichmentAnalysisResultList results=analyser.getEnrichmentAnalysisResults();

    /*
     * filter results with a pvalue lower than 0.01 and with adjusted pvalues
     */
    results.filterAndProcessResults(0.01, true);

    /*
     * get only  biclusters that have enriched genes
     */
    EnrichedBiclusterList enrichedbiclusters= results.getEnrichedBiclusterList();

    enrichedbiclusters.printResults();

}
</code></pre>
<h3 id="topgo">topGO</h3>
<pre><code>    public static void main(String[] args) throws Exception {


    URL dataUrl=HowToRunBiclusteringMethods.class.getResource("/ecoli_example.csv");

    // load expression dataset from file
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();

    RIsaMethod isa=new RIsaMethod(expressiondataset);
    isa.run();


    TopGOEnrichmentAnalyser analyser=new TopGOEnrichmentAnalyser(isa.getBiclusterResultList(), "org.EcK12.eg.db", true, TopGOMappingType.Symbol);
    analyser.run();

    EnrichmentAnalysisResultList results=analyser.getEnrichmentAnalysisResults();

    /*
     * process results with a pvalue lower than 0.05
     */
    results.filterAndProcessResults(0.05, false);

    System.out.println(results.getPercentageEnrichedBiclusters());


}
</code></pre>
<h2 id="post-processing-analysis">Post-processing Analysis</h2>
<h3 id="coherence">Coherence</h3>
<pre><code>    public static void main(String[] args) throws FileNotFoundException, IOException, MissingValueImputationException, ParseException {



    URL dataUrl=OntologizerExample.class.getResource("/ecoli_example.csv");

    // load expression dataset from file
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();

    // run unibic method over dataset
    UnibicMethod unibic=new UnibicMethod(expressiondataset);
    unibic.run();


    /*
     * Perform coherence anlaysis
     */

    // check multiplicative variance in all biclusters //
    LinkedHashMap&lt;Integer, Double&gt; multivar= CoherenceAnalyser.getMultiplicativeVarianceForBiclusterList(unibic.getBiclusterResultList(), AnalysisTypeDimension.BOTH);
    for (Integer bic : multivar.keySet()) {
        System.out.println("Multiplicative variance of bicluster "+(bic+1)+" its: "+multivar.get(bic));
    }

    System.out.println("\n\n");
    // check additive variance in all biclusters //
    LinkedHashMap&lt;Integer, Double&gt; addvar= CoherenceAnalyser.getAdditiveVarianceForBiclusterList(unibic.getBiclusterResultList(), AnalysisTypeDimension.BOTH);
    for (Integer bic : addvar.keySet()) {
        System.out.println("Additive variance of bicluster "+(bic+1)+" its: "+addvar.get(bic));
    }

    System.out.println("\n\n");
    // check constant variance in all biclusters //
    LinkedHashMap&lt;Integer, Double&gt; constvar= CoherenceAnalyser.getConstantVarianceForBiclusterList(unibic.getBiclusterResultList(), AnalysisTypeDimension.BOTH);
    for (Integer bic : constvar.keySet()) {
        System.out.println("Constant variance of bicluster "+(bic+1)+" its: "+constvar.get(bic));
    }

     System.out.println("\n\n");
     // check sign variance in all biclusters //
    LinkedHashMap&lt;Integer, Double&gt; signvar= CoherenceAnalyser.getSignVarianceForBiclusterList(unibic.getBiclusterResultList(), AnalysisTypeDimension.BOTH);
    for (Integer bic : signvar.keySet()) {
        System.out.println("Sign variance of bicluster "+(bic+1)+" its: "+signvar.get(bic));
    }



}
</code></pre>
<h3 id="coverage">Coverage</h3>
<pre><code> public static void main(String[] args) throws FileNotFoundException, IOException, MissingValueImputationException, ParseException {

    URL dataUrl=OntologizerExample.class.getResource("/ecoli_example.csv");

    // load expression dataset from file //
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();

    // run unibic method over dataset //
    UnibicMethod unibic=new UnibicMethod(expressiondataset);
    unibic.run();

    CoverageAnalyser coverage=new CoverageAnalyser(unibic.getBiclusterResultList());

    System.out.println("Total genes coverage: "+coverage.getTotalgenescoverage()*100+"%\n");
    System.out.println("Total conditions coverage: "+coverage.getTotalconditionscoverage()*100+"%\n");
    System.out.println("Total matrix coverage: "+coverage.getTotalmatrixcoverage()*100+"%\n");
}
</code></pre>
<h3 id="overlap">Overlap</h3>
<pre><code>   public static void main(String[] args) throws Exception {

    // change log level //
    LogMessageCenter.getLogger().setLogLevel(MTULogLevel.DEBUG);

    URL dataUrl=OntologizerExample.class.getResource("/ecoli_example.csv");

    // load expression dataset from file //
    ExpressionData expressiondataset=ExpressionData.importFromTXTFormat(dataUrl.getFile()).load();

    // run unibic method over dataset //
    CPBMethod cpb=new CPBMethod(expressiondataset);


    cpb.run();

    BiclusterList results=cpb.getBiclusterResultList();

    // check overlap between bicluster 1 and 2
    System.out.println("overlap between bicluster 1 and 2: "+OverlapAnalyser.getOverlapBeetwenTwoBiclusters(results.get(0), results.get(1)));



    // remove biclusters that have an overlap higher than a threshold

    BiclusterList filteredlist=OverlapAnalyser.filterBiclusterListWithOverlapThreshold(results, 0.2, results.size());
    filteredlist.printResults();


    System.out.println("Average Overlap: "+OverlapAnalyser.AverageOverlap(results));
}
</code></pre></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
